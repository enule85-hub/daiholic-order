<!DOCTYPE html>
<!-- saved from url=(0046)file:///C:/Users/enule/Downloads/index_79.html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë‹¤ì´í™€ë¦­ ì£¼ë¬¸ì„œ</title>
<link rel="preconnect" href="https://fonts.googleapis.com/">
<link href="file:///C:/Users/enule/Downloads/index_files/css2" rel="stylesheet">
<style>
  :root {
    --bg: #F6F4F0;
    --card: #FFFFFF;
    --text: #1B1B1B;
    --text-sub: #7A7A7A;
    --text-hint: #A8A8A8;
    --accent: #1B1B1B;
    --accent-light: #F0F0EE;
    --danger: #EF4444;
    --danger-light: #FEF2F2;
    --border: #EBEBEB;
    --input-bg: #F9F9F8;
    --radius: 14px;
    --radius-sm: 10px;
    --shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.03);
    --shadow-lg: 0 4px 24px rgba(0,0,0,0.06);
    --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Noto Sans KR', 'Plus Jakarta Sans', -apple-system, sans-serif;
    background: var(--bg);
    min-height: 100vh;
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Subtle grain texture */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
  }

  .page-wrapper {
    position: relative;
    z-index: 1;
    padding: 24px 16px 60px;
    max-width: 540px;
    margin: 0 auto;
  }

  /* â”€â”€â”€ Header â”€â”€â”€ */
  .header {
    text-align: center;
    padding: 32px 0 36px;
    animation: fadeDown 0.6s ease-out;
  }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .header-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--text);
    color: #fff;
    padding: 6px 14px;
    border-radius: 100px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    margin-bottom: 20px;
  }

  .header-badge .dot {
    width: 6px; height: 6px;
    background: #4ADE80;
    border-radius: 50%;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  .header h1 {
    font-family: 'Plus Jakarta Sans', 'Noto Sans KR', sans-serif;
    font-size: 32px;
    font-weight: 800;
    letter-spacing: -1px;
    line-height: 1.2;
    margin-bottom: 8px;
  }

  .header p {
    font-size: 14px;
    color: var(--text-sub);
    font-weight: 400;
  }

  /* â”€â”€â”€ Cards â”€â”€â”€ */
  .card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 28px 24px;
    margin-bottom: 14px;
    box-shadow: var(--shadow);
    animation: fadeUp 0.5s ease-out both;
    border: 1px solid rgba(0,0,0,0.03);
  }

  .card:nth-child(1) { animation-delay: 0.05s; }
  .card:nth-child(2) { animation-delay: 0.1s; }
  .card:nth-child(3) { animation-delay: 0.15s; }
  .card:nth-child(4) { animation-delay: 0.2s; }
  .card:nth-child(5) { animation-delay: 0.25s; }
  .card:nth-child(6) { animation-delay: 0.3s; }
  .card:nth-child(7) { animation-delay: 0.35s; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 700;
    color: var(--text-sub);
    letter-spacing: 0.5px;
    text-transform: uppercase;
    margin-bottom: 20px;
  }

  .card-title .title-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px; height: 28px;
    background: var(--accent-light);
    border-radius: 8px;
    font-size: 14px;
  }

  .card-title .required-dot {
    width: 5px; height: 5px;
    background: var(--danger);
    border-radius: 50%;
    margin-left: -4px;
  }

  /* â”€â”€â”€ Form â”€â”€â”€ */
  .form-group { margin-bottom: 18px; }
  .form-group:last-child { margin-bottom: 0; }

  label {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 13.5px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 8px;
  }

  label .required { color: var(--danger); font-size: 12px; }

  .hint {
    font-size: 12px;
    color: var(--text-hint);
    margin-top: 6px;
    line-height: 1.5;
  }

  input[type="text"],
  input[type="tel"],
  input[type="number"] {
    width: 100%;
    padding: 13px 16px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 15px;
    font-family: 'Noto Sans KR', sans-serif;
    color: var(--text);
    background: var(--input-bg);
    transition: all var(--transition);
    outline: none;
    -webkit-appearance: none;
  }

  input:focus {
    border-color: var(--text);
    background: #fff;
    box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
  }

  input::placeholder { color: #C4C4C4; }

  .error-msg {
    display: none;
    font-size: 12px;
    color: var(--danger);
    margin-top: 6px;
    font-weight: 500;
    padding-left: 2px;
  }

  /* â”€â”€â”€ Address â”€â”€â”€ */
  .address-row { display: flex; gap: 8px; margin-bottom: 8px; }
  .address-row input { flex: 1; }

  .btn-address {
    white-space: nowrap;
    padding: 13px 18px;
    background: var(--text);
    color: #fff;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 13px;
    font-weight: 600;
    font-family: 'Noto Sans KR', sans-serif;
    cursor: pointer;
    transition: all var(--transition);
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .btn-address:hover { background: #333; transform: translateY(-1px); }
  .btn-address:active { transform: translateY(0); }

  /* â”€â”€â”€ Pay Options â”€â”€â”€ */
  .pay-options { display: flex; gap: 10px; }

  .pay-option {
    flex: 1;
    border: 2px solid var(--border);
    border-radius: 14px;
    padding: 18px 14px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition);
    font-size: 14px;
    font-weight: 600;
    color: var(--text-sub);
    position: relative;
    overflow: hidden;
  }

  .pay-option > * { position: relative; z-index: 1; }

  .pay-option {
    flex: 1;
    border: 2px solid var(--border);
    border-radius: 14px;
    padding: 18px 14px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition);
    font-size: 14px;
    font-weight: 600;
    color: var(--text-sub);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100px;
  }

  .pay-option.selected {
    border-color: #D0D0D0;
    background: #F0F0EE;
    color: var(--text);
    font-weight: 700;
  }

  .pay-option .icon {
    margin-bottom: 8px;
    color: var(--text-hint);
    transition: color var(--transition);
  }

  #pay_transfer.selected .icon { color: #3B82F6; }
  #pay_card.selected .icon { color: #8B5CF6; }

  .pay-option:not(.selected):hover {
    border-color: #D0D0D0;
    background: #FAFAFA;
    transform: translateY(-1px);
  }

  /* â”€â”€â”€ Bank Info â”€â”€â”€ */
  .bank-info {
    background: linear-gradient(135deg, #F5F5F0 0%, #EFEFEB 100%);
    border-radius: 14px;
    padding: 22px;
    border: 1px solid rgba(0,0,0,0.04);
    min-height: 230px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .bank-info p {
    font-size: 14px;
    color: #444;
    line-height: 2;
  }

  .bank-info strong { color: var(--text); font-weight: 700; }

  .bank-info .warn-line {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(239,68,68,0.08);
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 13px;
    color: var(--danger);
    font-weight: 600;
    margin-top: 8px;
  }

  /* â”€â”€â”€ Card Guide â”€â”€â”€ */
  .card-guide {
    background: linear-gradient(135deg, #F5F5F0 0%, #EFEFEB 100%);
    border-radius: 14px;
    padding: 22px;
    text-align: center;
    border: 1px solid rgba(0,0,0,0.04);
    min-height: 230px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .card-guide .card-guide-icon {
    font-size: 36px;
    margin-bottom: 10px;
  }

  .card-guide p {
    font-size: 14px;
    color: #555;
    line-height: 1.8;
    font-weight: 500;
  }

  /* â”€â”€â”€ Receipt Options â”€â”€â”€ */
  .receipt-options {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }

  .receipt-option {
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 12px 6px;
    text-align: center;
    cursor: pointer;
    transition: all var(--transition);
    font-size: 12.5px;
    font-weight: 600;
    color: var(--text-sub);
    white-space: nowrap;
  }

  .receipt-option.selected {
    border-color: #D0D0D0;
    background: #F0F0EE;
    color: var(--text);
    font-weight: 700;
  }

  .receipt-option:not(.selected):hover {
    border-color: #D0D0D0;
    background: #FAFAFA;
  }

  .receipt-detail {
    margin-top: 14px;
    display: none;
  }

  .receipt-detail.show { display: block; }

  /* â”€â”€â”€ Product Select â”€â”€â”€ */
  .product-select option:disabled { color: #bbb; }
  .stock-info { font-size: 12px; margin-top: 7px; font-weight: 600; }
  .stock-info.unlimited { color: #7C3AED; }
  .stock-info.in-stock  { color: #2563EB; }
  .stock-info.soldout   { color: #DC2626; }
  .product-select {
    width: 100%;
    padding: 13px 16px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 15px;
    font-family: 'Noto Sans KR', sans-serif;
    color: var(--text);
    background: var(--input-bg);
    transition: all var(--transition);
    outline: none;
    -webkit-appearance: none;
    cursor: pointer;
  }
  .product-select:focus {
    border-color: var(--text);
    background: #fff;
    box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
  }
  .shipping-fee-info {
    display: none;
    margin-top: 8px;
    margin-bottom: 6px;
    font-size: 13px;
    font-weight: 600;
    color: #555;
    padding: 0 2px;
  }
  .shipping-fee-info .free { color: #059669; }
  .shipping-info {
    display: none;
    margin-top: 8px;
    padding: 10px 14px;
    background: #F0F9FF;
    border-radius: var(--radius-sm);
    font-size: 13px;
    color: #0369A1;
    font-weight: 600;
  }

  /* â”€â”€â”€ Amount Display â”€â”€â”€ */
  .amount-display {
    background: linear-gradient(135deg, var(--accent-light), #EFEFEB);
    border-radius: var(--radius-sm);
    padding: 18px;
    margin-top: 10px;
    border: 1px solid rgba(0,0,0,0.03);
  }

  .amount-display .label {
    font-size: 11px;
    color: var(--text-sub);
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    margin-bottom: 4px;
  }

  .amount-display .value {
    font-family: 'Plus Jakarta Sans', 'Noto Sans KR', sans-serif;
    font-size: 26px;
    font-weight: 800;
    color: var(--text);
    letter-spacing: -0.5px;
  }

  /* â”€â”€â”€ Privacy â”€â”€â”€ */
  .privacy-box {
    background: #F9F9F8;
    border-radius: var(--radius-sm);
    padding: 20px;
    margin-bottom: 14px;
    border: 1px solid var(--border);
  }

  .privacy-row { margin-bottom: 14px; }
  .privacy-row:last-child { margin-bottom: 0; }

  .privacy-label {
    font-size: 11px;
    color: var(--text-hint);
    font-weight: 600;
    letter-spacing: 0.3px;
    text-transform: uppercase;
    margin-bottom: 4px;
  }

  .privacy-value {
    font-size: 14px;
    color: var(--text);
    font-weight: 500;
    line-height: 1.5;
  }

  .privacy-hint {
    font-size: 12px;
    color: var(--text-hint);
    margin-bottom: 16px;
    line-height: 1.5;
  }

  .privacy-check {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 18px;
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-sub);
    transition: all var(--transition);
    user-select: none;
  }

  .privacy-check:hover { border-color: #D0D0D0; }

  .privacy-check.agreed {
    border-color: #D0D0D0;
    background: #F0F0EE;
    color: var(--text);
  }

  .check-icon {
    width: 24px;
    height: 24px;
    border-radius: 8px;
    border: 2px solid #D0D0D0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    color: transparent;
    flex-shrink: 0;
    transition: all var(--transition);
  }

  .privacy-check.agreed .check-icon {
    background: var(--text);
    border-color: var(--text);
    color: #fff;
    font-weight: 700;
  }

  /* â”€â”€â”€ Submit Button â”€â”€â”€ */
  .submit-btn {
    width: 100%;
    padding: 18px;
    background: var(--text);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    font-size: 16px;
    font-weight: 700;
    font-family: 'Noto Sans KR', sans-serif;
    cursor: pointer;
    transition: all var(--transition);
    margin-top: 10px;
    position: relative;
    overflow: hidden;
    letter-spacing: -0.3px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    animation: fadeUp 0.5s ease-out 0.4s both;
  }

  .submit-btn::after {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
    transition: left 0.5s;
  }

  .submit-btn:hover::after { left: 100%; }
  .submit-btn:hover { background: #333; transform: translateY(-1px); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
  .submit-btn:active { transform: translateY(0); box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
  .submit-btn:disabled { background: #C4C4C4; cursor: not-allowed; box-shadow: none; }

  /* â”€â”€â”€ Success Box â”€â”€â”€ */
  .success-box {
    display: none;
    text-align: center;
    padding: 56px 28px;
    background: var(--card);
    border-radius: 20px;
    box-shadow: var(--shadow-lg);
    animation: scaleIn 0.4s ease-out;
    border: 1px solid rgba(0,0,0,0.03);
  }

  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  .success-box .icon {
    width: 72px; height: 72px;
    background: linear-gradient(135deg, #A78BFA, #7C3AED);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 36px;
    color: #fff;
    box-shadow: 0 8px 24px rgba(124,58,237,0.3);
    animation: hourglassPulse 1.5s ease-in-out infinite;
  }
  @keyframes hourglassPulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.08); opacity: 0.85; }
  }

  .success-box h2 {
    font-size: 22px;
    font-weight: 800;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
  }

  .success-box p { font-size: 14px; color: var(--text-sub); line-height: 1.7; }

  .loading-bar-wrap {
    width: 100%; max-width: 240px;
    height: 6px;
    background: #EDE9FE;
    border-radius: 99px;
    margin: 20px auto 0;
    overflow: hidden;
  }
  .loading-bar-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #A78BFA, #7C3AED);
    border-radius: 99px;
    transition: width 0.3s ease;
  }
  .loading-step-text {
    font-size: 12px;
    color: #A78BFA;
    margin-top: 10px;
    font-weight: 600;
    min-height: 18px;
  }

  /* â”€â”€â”€ Email Domain Select â”€â”€â”€ */
  select {
    width: 100%;
    padding: 13px 36px 13px 14px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 14px;
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--input-bg);
    color: var(--text);
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
    transition: all var(--transition);
  }

  select:focus {
    border-color: var(--text);
    box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
  }

  /* â”€â”€â”€ Footer â”€â”€â”€ */
  .footer {
    text-align: center;
    padding: 28px 0 8px;
    animation: fadeUp 0.5s ease-out 0.5s both;
  }

  .footer p {
    font-size: 12px;
    color: var(--text-hint);
    line-height: 1.6;
  }

  /* â”€â”€â”€ Responsive â”€â”€â”€ */
  @media (max-width: 420px) {
    .receipt-options {
      grid-template-columns: repeat(2, 1fr);
    }
    .header h1 { font-size: 28px; }
  }


</style>
<script src="file:///C:/Users/enule/Downloads/index_files/postcode.v2.js.%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C"></script>
</head>
<body>

<div class="page-wrapper">
  <div class="header">
    <div class="header-badge">
      <span class="dot"></span>
      ì£¼ë¬¸ ì ‘ìˆ˜ ì¤‘
    </div>
    <h1>ë‹¤ì´í™€ë¦­ ì£¼ë¬¸ì„œ</h1>
    <p>ì•„ë˜ ì •ë³´ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”</p>
  </div>

  <div id="formArea">

    <!-- ê²°ì œ ë°©ë²• -->
    <div class="card">
      <div class="card-title">
        <span class="title-icon">ğŸ’³</span>
        ê²°ì œ ë°©ë²•
      </div>
      <div class="pay-options">
        <div class="pay-option selected" id="pay_transfer" onclick="selectPay(&#39;transfer&#39;)">
          <div class="icon">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
              <rect x="4" y="8" width="24" height="16" rx="4" fill="currentColor" opacity="0.15"></rect>
              <rect x="4" y="8" width="24" height="16" rx="4" stroke="currentColor" stroke-width="2"></rect>
              <circle cx="12" cy="16" r="3" fill="currentColor"></circle>
              <line x1="18" y1="14" x2="24" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
              <line x1="18" y1="18" x2="22" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
              <path d="M16 4 L16 8 M13 5.5 L16 4 L19 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
          ê³„ì¢Œì´ì²´
        </div>
        <div class="pay-option" id="pay_card" onclick="selectPay(&#39;card&#39;)">
          <div class="icon" style="display:flex; justify-content:center; align-items:center; gap:6px;">
            <svg width="28" height="28" viewBox="0 0 32 32" fill="none">
              <rect x="3" y="7" width="26" height="18" rx="4" fill="currentColor" opacity="0.15"></rect>
              <rect x="3" y="7" width="26" height="18" rx="4" stroke="currentColor" stroke-width="2"></rect>
              <rect x="3" y="12" width="26" height="4" fill="currentColor" opacity="0.3"></rect>
              <rect x="7" y="20" width="6" height="2" rx="1" fill="currentColor"></rect>
              <rect x="15" y="20" width="4" height="2" rx="1" fill="currentColor"></rect>
            </svg>
            <svg width="28" height="28" viewBox="0 0 32 32" fill="none">
              <rect x="2" y="6" width="28" height="20" rx="5" fill="currentColor" opacity="0.12"></rect>
              <rect x="2" y="6" width="28" height="20" rx="5" stroke="currentColor" stroke-width="2"></rect>
              <text x="16" y="20" text-anchor="middle" font-size="10" font-weight="800" fill="currentColor" font-family="Arial,sans-serif">PAY</text>
            </svg>
          </div>
          ì¹´ë“œê²°ì œ / PAYê²°ì œ
        </div>
      </div>

      <!-- ê³„ì¢Œì´ì²´ ì…ê¸ˆ ì•ˆë‚´ -->
      <div id="bankInfo" style="margin-top: 16px; display: block;">
        <div class="bank-info">
          <p>
            ì€í–‰: <strong>IBK ê¸°ì—…ì€í–‰</strong><br>
            ê³„ì¢Œë²ˆí˜¸: <strong>519-075718-04-018</strong><br>
            ì˜ˆê¸ˆì£¼: <strong>ì£¼ì‹íšŒì‚¬ ë¦¬ìœ ë‹ˆí‹°</strong>
          </p>
          <div class="warn-line">âš ï¸ ì£¼ë¬¸ìëª…ê³¼ ë™ì¼í•œ ì´ë¦„ìœ¼ë¡œ ì…ê¸ˆí•´ ì£¼ì„¸ìš”</div>
        </div>
      </div>

      <!-- ì¹´ë“œê²°ì œ ì•ˆë‚´ -->
      <div id="cardInfo" style="margin-top: 16px; display: none;">
        <div class="card-guide">
          <div class="card-guide-icon">ğŸ’³</div>
          <div style="font-size:12px; color:#A8A8A8; font-weight:500; line-height:1.8; margin-bottom:8px;">ì¹´ë“œê²°ì œ Â· ë„¤ì´ë²„í˜ì´ Â· ì¹´ì¹´ì˜¤í˜ì´<br>ì• í”Œí˜ì´ Â· í˜ì´ì½” Â· ìŠ¤ë§ˆì¼í˜ì´ Â· í† ìŠ¤í˜ì´</div>
          <p>ì£¼ë¬¸ì„œ ì‘ì„± ì™„ë£Œ í›„<br>ê²°ì œ í˜ì´ì§€ë¡œ ìë™ ì´ë™ë©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>

    <!-- ì£¼ë¬¸ì ì •ë³´ -->
    <div class="card">
      <div class="card-title">
        <span class="title-icon">ğŸ‘¤</span>
        ì£¼ë¬¸ì ì •ë³´
      </div>

      <div class="form-group">
        <label id="nameLabel">ì£¼ë¬¸ìëª… <span class="required">*</span></label>
        <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”">
        <div class="hint" id="nameHint" style="display:inline-flex; align-items:center; gap:6px; background:rgba(255,152,0,0.12); padding:8px 14px; border-radius:8px; font-size:13px; color:#e65100; font-weight:600;">âš ï¸ ì¹´í˜ ì•„ì´ë”” ë§ê³  ê¼­ ì…ê¸ˆì ì‹¤ëª…ì„ ì ì–´ì£¼ì„¸ìš”. ì…ê¸ˆ í™•ì¸ ì‹œ í•„ìš”í•©ë‹ˆë‹¤.</div>
        <div class="error-msg" id="nameErr">ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
      </div>

      <div class="form-group">
        <label>ì—°ë½ì²˜ <span class="required">*</span></label>
        <input type="tel" id="phone" placeholder="010-0000-0000" oninput="validatePhone()">
        <div class="error-msg" id="phoneErr">ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
        <div class="error-msg" id="phoneFormatErr">ì—°ë½ì²˜ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš” (01ë¡œ ì‹œì‘í•˜ëŠ” 11ìë¦¬ ë²ˆí˜¸)</div>
      </div>
    </div>

    <!-- ë°°ì†¡ì§€ -->
    <div class="card">
      <div class="card-title">
        <span class="title-icon">ğŸ“¦</span>
        ë°°ì†¡ì§€
      </div>
      <div class="form-group">
        <label>ì£¼ì†Œ <span class="required">*</span></label>
        <div class="address-row">
          <input type="text" id="postcode" placeholder="ìš°í¸ë²ˆí˜¸" readonly="">
          <button class="btn-address" onclick="searchAddress()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="7" cy="7" r="4.5" stroke="white" stroke-width="1.8"></circle><path d="M10.5 10.5L14 14" stroke="white" stroke-width="1.8" stroke-linecap="round"></path></svg>
            ì£¼ì†Œ ê²€ìƒ‰
          </button>
        </div>
        <input type="text" id="address1" placeholder="ê¸°ë³¸ ì£¼ì†Œ" readonly="" style="margin-bottom:8px">
        <input type="text" id="address2" placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥ (ë™/í˜¸ìˆ˜ ë“±)">
        <div class="error-msg" id="addressErr">ì£¼ì†Œë¥¼ ê²€ìƒ‰í•´ ì£¼ì„¸ìš”</div>
      </div>
    </div>

    <!-- ì£¼ë¬¸ ìƒí’ˆ -->
    <div class="card">
      <div class="card-title">
        <span class="title-icon">ğŸ›’</span>
        ì£¼ë¬¸ ìƒí’ˆ
      </div>

      <div class="form-group">
        <label>í’ˆëª©ëª… <span class="required">*</span></label>
        <select class="product-select" id="product" onchange="onProductChange()"><option value="">ìƒí’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</option></select>
        <div id="stockInfo" class="stock-info" style="display:none;"></div>
        <div id="productDesc" style="display:none;font-size:13px;color:#555;margin-top:6px;padding:8px 12px;background:#F8F8F8;border-radius:8px;line-height:1.6;white-space:pre-wrap;"></div>
        <div class="error-msg" id="productErr">í’ˆëª©ëª…ì„ ì„ íƒí•´ ì£¼ì„¸ìš”</div>
      </div>

      <div class="form-group">
        <label>ìˆ˜ëŸ‰ <span class="required">*</span></label>
        <input type="number" id="quantity" placeholder="ìˆ˜ëŸ‰ ì…ë ¥" min="1" inputmode="numeric" pattern="[0-9]*" oninput="onQuantityChange()">
        <div class="error-msg" id="quantityErr">ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
      </div>

      <div class="form-group">
        <label id="amountLabel">ê²°ì œ ê¸ˆì•¡ <span class="required">*</span></label>
        <input type="number" id="amount" placeholder="ìƒí’ˆ ì„ íƒ ì‹œ ìë™ ì…ë ¥ë©ë‹ˆë‹¤" inputmode="numeric" pattern="[0-9]*" oninput="updateAmount()" readonly="" style="background:#F0F0EE; cursor:not-allowed; color:#7A7A7A;">
        <div class="hint" id="amountHint">ìƒí’ˆ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</div>
        <div class="error-msg" id="amountErr">ê¸ˆì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
        <div class="error-msg" id="amountMinErr">ì¹´ë“œ ê²°ì œ ìµœì†Œ ê¸ˆì•¡ì€ 1,000ì›ì…ë‹ˆë‹¤</div>
        <div class="shipping-fee-info" id="shippingFeeInfo" style="display:none"></div>
        <div class="amount-display" id="amountDisplay" style="display:none">
          <div class="label" id="amountDisplayLabel">ê²°ì œ ê¸ˆì•¡</div>
          <div class="value" id="amountValue"></div>
        </div>
        <div class="shipping-info" id="shippingInfo"></div>
      </div>
    </div>

    <!-- ì„¸ê¸ˆê³„ì‚°ì„œ / í˜„ê¸ˆì˜ìˆ˜ì¦ -->
    <div class="card" id="receiptCard">
      <div class="card-title">
        <span class="title-icon">ğŸ§¾</span>
        ì„¸ê¸ˆê³„ì‚°ì„œ / í˜„ê¸ˆì˜ìˆ˜ì¦
      </div>
      <div class="form-group">
        <label>ë°œí–‰ ìœ í˜• ì„ íƒ</label>
        <div class="receipt-options">
          <div class="receipt-option selected" id="rec_none" onclick="selectReceipt(&#39;none&#39;)">í•„ìš”ì—†ìŒ</div>
          <div class="receipt-option" id="rec_cash" onclick="selectReceipt(&#39;cash&#39;)">í˜„ê¸ˆì˜ìˆ˜ì¦</div>
          <div class="receipt-option" id="rec_expense" onclick="selectReceipt(&#39;expense&#39;)">ì§€ì¶œì¦ë¹™</div>
          <div class="receipt-option" id="rec_tax" onclick="selectReceipt(&#39;tax&#39;)">ì„¸ê¸ˆê³„ì‚°ì„œ</div>
        </div>

        <div class="receipt-detail" id="receiptDetail" style="display:none; margin-top:14px;">
          <label>íœ´ëŒ€ì „í™” ë²ˆí˜¸ <span class="required">*</span></label>
          <div style="display:flex; align-items:center; gap:8px; margin-bottom:8px; cursor:pointer;" onclick="toggleSamePhone()">
            <div id="samePhoneCheck" style="width:18px; height:18px; border:2px solid #CCCCCC; border-radius:4px; display:flex; align-items:center; justify-content:center; flex-shrink:0; transition:all 0.2s; background:#fff;"></div>
            <span style="font-size:13px; color:#7A7A7A; font-weight:500;">ì£¼ë¬¸ì ì •ë³´ì™€ ë™ì¼</span>
          </div>
          <input type="tel" id="receiptNumber" placeholder="íœ´ëŒ€ì „í™” ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš” (ìˆ«ìë§Œ)" maxlength="11" inputmode="numeric" pattern="[0-9]*" oninput="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)">
          <div class="error-msg" id="receiptNumberErr">íœ´ëŒ€ì „í™” ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
        </div>
        <div class="receipt-detail" id="expenseDetail" style="display:none; margin-top:14px;">
          <label>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ <span class="required">*</span></label>
          <input type="tel" id="expenseNumber" placeholder="ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ 10ìë¦¬ ì…ë ¥ (ìˆ«ìë§Œ)" maxlength="10" inputmode="numeric" pattern="[0-9]*" oninput="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)">
          <div class="error-msg" id="expenseNumberErr">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ 10ìë¦¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
        </div>
        <div class="receipt-detail" id="taxDetail" style="display:none; margin-top:14px;">
          <label>ì‚¬ì—…ìëª… <span class="required">*</span></label>
          <input type="text" id="bizName" placeholder="ì‚¬ì—…ìëª… ì…ë ¥" style="margin-bottom:4px;">
          <div class="error-msg" id="bizNameErr">ì‚¬ì—…ìëª…ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
          <label style="margin-top:10px; display:block;">ì‚¬ì—…ìë²ˆí˜¸ <span class="required">*</span></label>
          <input type="tel" id="bizNumber" placeholder="ì‚¬ì—…ìë²ˆí˜¸ 10ìë¦¬ ì…ë ¥ (ìˆ«ìë§Œ)" maxlength="10" inputmode="numeric" pattern="[0-9]*" oninput="this.value=this.value.replace(/[^0-9]/g,&#39;&#39;)" style="margin-bottom:4px;">
          <div class="error-msg" id="bizNumberErr">ì‚¬ì—…ìë²ˆí˜¸ 10ìë¦¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”</div>
          <label style="margin-top:10px; display:block;">ì´ë©”ì¼ <span style="font-size:12px;color:#A8A8A8;">(ì„ íƒ)</span></label>
          <div style="margin-bottom:8px;">
            <div style="display:flex; gap:6px; align-items:center;">
              <input type="text" id="bizEmailId" placeholder="ì´ë©”ì¼" style="flex:1; margin-bottom:0;">
              <span style="font-size:16px; color:var(--text-hint); flex-shrink:0;">@</span>
              <div style="flex:1; position:relative;">
                <select id="bizEmailDomain" onchange="toggleEmailDirect()">
                  <option value="direct">ì§ì ‘ ì…ë ¥</option>
                  <option value="naver.com">naver.com</option>
                  <option value="gmail.com">gmail.com</option>
                  <option value="daum.net">daum.net</option>
                  <option value="kakao.com">kakao.com</option>
                  <option value="nate.com">nate.com</option>
                  <option value="hanmail.net">hanmail.net</option>
                </select>
                <div style="pointer-events:none; position:absolute; right:12px; top:50%; transform:translateY(-50%); color:var(--text-hint);">
                  <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                </div>
              </div>
            </div>
            <input type="text" id="bizEmailDomainDirect" placeholder="ë„ë©”ì¸ ì§ì ‘ ì…ë ¥ (ì˜ˆ: company.com)" style="display:block; margin-top:8px;">
          </div>
        </div>
      </div>
    </div>

    <!-- ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë™ì˜ -->
    <div class="card">
      <div class="card-title">
        <span class="title-icon">ğŸ”’</span>
        ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë™ì˜
        <span class="required-dot"></span>
      </div>
      <div class="privacy-box">
        <div class="privacy-row">
          <div class="privacy-label">ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©</div>
          <div class="privacy-value">ì´ë¦„, ì—°ë½ì²˜, ì£¼ì†Œ, ì‚¬ì—…ìì •ë³´</div>
        </div>
        <div class="privacy-row">
          <div class="privacy-label">ìˆ˜ì§‘ ë° ì´ìš© ëª©ì </div>
          <div class="privacy-value">ìƒí’ˆ ì£¼ë¬¸ í™•ì¸ ë° ë°°ì†¡ ë° ê³„ì‚°ì„œ ë°œí–‰ì„ ìœ„í•œ ì‚¬ì—…ì ì •ë³´</div>
        </div>
        <div class="privacy-row">
          <div class="privacy-label">ë³´ìœ  ë° ì´ìš©ê¸°ê°„</div>
          <div class="privacy-value" style="color: var(--danger); font-weight: 600;">ìƒí’ˆ ë°°ì†¡ í›„ 1ê°œì›”</div>
        </div>
      </div>
      <div class="privacy-hint">ë™ì˜ë¥¼ ê±°ë¶€í•˜ì‹¤ ìˆ˜ ìˆìœ¼ë‚˜ ì£¼ë¬¸ ì°¸ì—¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
      <div class="privacy-check" id="privacyCheck" onclick="togglePrivacy()">
        <div class="check-icon" id="checkIcon">âœ“</div>
        ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.
      </div>
      <div class="error-msg" id="privacyErr">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•´ ì£¼ì„¸ìš”</div>
    </div>

    <button class="submit-btn" id="submitBtn" onclick="submitOrder()">ì£¼ë¬¸ ì™„ë£Œí•˜ê¸°</button>
  </div>

  <!-- ì™„ë£Œ í™”ë©´ -->
  <div class="success-box" id="successBox">
    <div class="icon" id="successIcon">â³</div>
    <h2 id="successTitle">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì‹­ì‹œì˜¤</h2>
    <p id="successMsg">ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì¹´ë“œê²°ì œ í˜ì´ì§€ë¡œ ì´ë™ì¤‘ì…ë‹ˆë‹¤.</p>
    <div class="loading-bar-wrap" id="loadingBarWrap" style="display:none;">
      <div class="loading-bar-fill" id="loadingBarFill"></div>
    </div>
    <div class="loading-step-text" id="loadingStepText"></div>
  </div>

  <div class="footer">
    <p>ë‹¤ì´í™€ë¦­ Â· ì£¼ì‹íšŒì‚¬ ë¦¬ìœ ë‹ˆí‹°</p>
  </div>
</div>

<script>
var WEBHOOK_URL = "https://script.google.com/macros/s/AKfycbw5oc6lprF-07bmb01AYuaDswvJM3hmQMA6RNRjZdUep8eEki4R8sm3zz5QWdyb5JBtNQ/exec";
var PRODUCT_API_URL = "https://script.google.com/macros/s/AKfycby_Ipcifm1sJFswVXA1l5wPy5JkxQk8HSt_Q8Msyr241K4RcUhjE6E066vy4E4uIyiJRA/exec";
var productList = [];
var privacyAgreed = false;
var selectedPay = 'transfer';
var selectedReceipt = 'none';

// âœ… í˜ì´ì§€ ë¡œë”© ì‹œ ìƒí’ˆ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
function loadProducts() {
  var select = document.getElementById('product');
  select.innerHTML = '<option value="">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</option>';
  fetch(PRODUCT_API_URL)
    .then(function(res) { return res.json(); })
    .then(function(data) {
      productList = data;
      select.innerHTML = '<option value="">ìƒí’ˆì„ ì„ íƒí•´ ì£¼ì„¸ìš”</option>';
      data.forEach(function(item) {
        var isSoldout = (item.stock !== '' && item.stock !== null && item.stock !== undefined && Number(item.stock) <= 0);
        var opt = document.createElement('option');
        opt.value = item.name;
        opt.dataset.price = item.price;
        opt.dataset.shipping = item.shipping;
        opt.dataset.stock  = (item.stock  !== null && item.stock  !== undefined) ? item.stock  : '';
        opt.dataset.bundle = (item.bundle !== null && item.bundle !== undefined) ? item.bundle : '';
        opt.dataset.desc   = item.desc || '';
        if (isSoldout) {
          opt.disabled = true;
          opt.textContent = '[í’ˆì ˆ] ' + item.name;
        } else {
          opt.textContent = item.name + ' (' + parseInt(item.price).toLocaleString('ko-KR') + 'ì›)';
        }
        select.appendChild(opt);
      });
    })
    .catch(function() {
      select.innerHTML = '<option value="">ìƒí’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</option>';
    });
}

// ë¬¶ìŒë°°ì†¡ íƒë°°ë¹„ ê³„ì‚°
function calcShipping(baseShipping, bundle, qty) {
  if (bundle === '' || bundle === null || bundle === undefined || bundle === 'undefined' || isNaN(parseInt(bundle))) {
    return baseShipping; // ë¬¶ìŒ ì„¤ì • ì—†ìœ¼ë©´ ê³ ì • ë°°ì†¡ë¹„
  }
  var b = parseInt(bundle);
  if (b <= 0) return baseShipping;
  var boxes = Math.ceil(qty / b); // ë°•ìŠ¤ ìˆ˜ = ì˜¬ë¦¼(ìˆ˜ëŸ‰/ë¬¶ìŒìˆ˜ëŸ‰)
  return baseShipping * boxes;
}

// âœ… ìƒí’ˆ ë³€ê²½ ì‹œ ìˆ˜ëŸ‰ ì´ˆê¸°í™” í›„ onProductSelect í˜¸ì¶œ
function onProductChange() {
  document.getElementById('quantity').value = '';
  document.getElementById('quantity').style.borderColor = '';
  document.getElementById('amount').value = '';
  document.getElementById('stockInfo').style.display = 'none';
  document.getElementById('shippingFeeInfo').style.display = 'none';
  document.getElementById('productDesc').style.display = 'none';
  updateAmount();
  onProductSelect();
}

// âœ… ìƒí’ˆ ì„ íƒ ì‹œ ê¸ˆì•¡ ìë™ ì…ë ¥
function onProductSelect() {
  var select = document.getElementById('product');
  var selectedOpt = select.options[select.selectedIndex];

  if (!select.value) {
    document.getElementById('amount').value = '';
    document.getElementById('stockInfo').style.display = 'none';
    document.getElementById('shippingFeeInfo').style.display = 'none';
    updateAmount();
    return;
  }

  var price = parseInt(selectedOpt.dataset.price) || 0;
  var shipping = parseInt(selectedOpt.dataset.shipping) || 0;
  var qty = parseInt(document.getElementById('quantity').value) || 0;

  var bundle = selectedOpt.dataset.bundle;
  var actualShipping = calcShipping(shipping, bundle, qty > 0 ? qty : 1);

  // ìˆ˜ëŸ‰ì´ ì…ë ¥ëœ ê²½ìš°ì—ë§Œ ê¸ˆì•¡ ê³„ì‚°
  if (qty > 0) {
    actualShipping = calcShipping(shipping, bundle, qty);
    document.getElementById('amount').value = (price * qty) + actualShipping;
  } else {
    document.getElementById('amount').value = '';
  }
  updateAmount();

  // íƒë°°ë¹„ í‘œì‹œ
  var feeEl = document.getElementById('shippingFeeInfo');
  if (shipping === 0) {
    feeEl.style.display = 'block';
    feeEl.innerHTML = 'ğŸ“¦ <span class="free">ë¬´ë£Œë°°ì†¡</span>';
  } else if (qty > 0 && actualShipping !== shipping) {
    feeEl.style.display = 'block';
    var bundleInfoOver = (bundle && bundle !== '' && bundle !== 'undefined') ? ' <span style="color:#7C3AED;font-size:11px;">(' + parseInt(bundle) + 'ê°œê¹Œì§€ ë¬¶ìŒë°°ì†¡ ê°€ëŠ¥)</span>' : '';
    feeEl.innerHTML = 'ğŸ“¦ íƒë°°ë¹„ <strong>' + actualShipping.toLocaleString('ko-KR') + 'ì›</strong>' + bundleInfoOver;
  } else {
    feeEl.style.display = 'block';
    var bundleInfo = (bundle && bundle !== '' && bundle !== 'undefined') ? ' <span style="color:#7C3AED;font-size:11px;">(' + parseInt(bundle) + 'ê°œê¹Œì§€ ë¬¶ìŒë°°ì†¡ ê°€ëŠ¥)</span>' : '';
    feeEl.innerHTML = 'ğŸ“¦ íƒë°°ë¹„ <strong>' + shipping.toLocaleString('ko-KR') + 'ì›</strong>' + bundleInfo;
  }

  // ì¬ê³  í‘œì‹œ
  var stockEl = document.getElementById('stockInfo');
  var stockVal = selectedOpt.dataset.stock;
  var qtyInput = document.getElementById('quantity');
  // ìƒí’ˆì„¤ëª… í‘œì‹œ
  var descEl = document.getElementById('productDesc');
  var descVal = selectedOpt.dataset.desc;
  if (descVal && descVal.trim() !== '') {
    descEl.style.display = 'block';
    descEl.textContent = descVal;
  } else {
    descEl.style.display = 'none';
  }

  stockEl.style.display = 'block';
  if (stockVal === '' || stockVal === 'undefined' || stockVal === undefined || stockVal === null) {
    stockEl.className = 'stock-info unlimited';
    stockEl.textContent = 'âœ“ ì¬ê³  ë¬´ì œí•œ';
    qtyInput.removeAttribute('max');
  } else if (Number(stockVal) <= 0) {
    stockEl.className = 'stock-info soldout';
    stockEl.textContent = 'âœ• í’ˆì ˆ';
    qtyInput.setAttribute('max', '0');
  } else {
    stockEl.className = 'stock-info in-stock';
    stockEl.textContent = 'âœ“ ì¬ê³  ' + Number(stockVal) + 'ê°œ ë‚¨ìŒ';
    qtyInput.setAttribute('max', Number(stockVal));
  }
}

// âœ… ìˆ˜ëŸ‰ ë³€ê²½ ì‹œ ê¸ˆì•¡ ì¬ê³„ì‚°
function onQuantityChange() {
  var select = document.getElementById('product');
  if (select.value) {
    var selectedOpt = select.options[select.selectedIndex];
    var price = parseInt(selectedOpt.dataset.price) || 0;
    var shipping = parseInt(selectedOpt.dataset.shipping) || 0;
    var qty    = parseInt(document.getElementById('quantity').value) || 0;
    var bundle = selectedOpt.dataset.bundle;
    if (qty > 0) {
      var actualShipping = calcShipping(shipping, bundle, qty);
      document.getElementById('amount').value = (price * qty) + actualShipping;
      // íƒë°°ë¹„ í‘œì‹œ ì—…ë°ì´íŠ¸
      var feeEl = document.getElementById('shippingFeeInfo');
      if (shipping === 0) {
        feeEl.innerHTML = 'ğŸ“¦ <span class="free">ë¬´ë£Œë°°ì†¡</span>';
      } else if (actualShipping !== shipping) {
        var bundleInfoOver2 = (bundle && bundle !== '' && bundle !== 'undefined') ? ' <span style="color:#7C3AED;font-size:11px;">(' + parseInt(bundle) + 'ê°œê¹Œì§€ ë¬¶ìŒë°°ì†¡ ê°€ëŠ¥)</span>' : '';
        feeEl.innerHTML = 'ğŸ“¦ íƒë°°ë¹„ <strong>' + actualShipping.toLocaleString('ko-KR') + 'ì›</strong>' + bundleInfoOver2;
      } else {
        var bundleInfo2 = (bundle && bundle !== '' && bundle !== 'undefined') ? ' <span style="color:#7C3AED;font-size:11px;">(' + parseInt(bundle) + 'ê°œê¹Œì§€ ë¬¶ìŒë°°ì†¡ ê°€ëŠ¥)</span>' : '';
        feeEl.innerHTML = 'ğŸ“¦ íƒë°°ë¹„ <strong>' + shipping.toLocaleString('ko-KR') + 'ì›</strong>' + bundleInfo2;
      }
    } else {
      document.getElementById('amount').value = '';
    }
    updateAmount();
  }
  checkStockLimit();
}

function checkStockLimit() {
  var select = document.getElementById('product');
  var selectedOpt = select.options[select.selectedIndex];
  var quantityEl = document.getElementById('quantity');
  var stockEl = document.getElementById('stockInfo');
  if (!select.value || !selectedOpt) return;

  var stockVal = selectedOpt.dataset.stock;
  if (stockVal === '' || stockVal === 'undefined' || stockVal === undefined || stockVal === null) return; // ë¬´ì œí•œ

  var stock = Number(stockVal);
  var qty = parseInt(quantityEl.value) || 0;

  if (qty > stock) {
    // ì¬ê³  ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ maxê°’ìœ¼ë¡œ ì¡°ì •
    quantityEl.value = stock;
    stockEl.className = 'stock-info in-stock';
    stockEl.textContent = 'âœ“ ì¬ê³  ' + stock + 'ê°œ ë‚¨ìŒ';
    quantityEl.style.borderColor = '';
    // ê¸ˆì•¡ ì¬ê³„ì‚°
    var price = parseInt(selectedOpt.dataset.price) || 0;
    var shipping = parseInt(selectedOpt.dataset.shipping) || 0;
    document.getElementById('amount').value = (price * stock) + shipping;
    updateAmount();
  } else {
    stockEl.className = 'stock-info in-stock';
    stockEl.textContent = 'âœ“ ì¬ê³  ' + stock + 'ê°œ ë‚¨ìŒ';
    quantityEl.style.borderColor = '';
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
window.onload = function() { loadProducts(); };

function togglePrivacy() {
  privacyAgreed = !privacyAgreed;
  var el = document.getElementById('privacyCheck');
  if (privacyAgreed) { el.classList.add('agreed'); }
  else { el.classList.remove('agreed'); }
}

function toggleEmailDirect() {
  var val = document.getElementById('bizEmailDomain').value;
  document.getElementById('bizEmailDomainDirect').style.display = (val === 'direct') ? 'block' : 'none';
}

function getBizEmail() {
  var id = document.getElementById('bizEmailId').value.trim();
  if (!id) return '';
  var sel = document.getElementById('bizEmailDomain').value;
  var domain = (sel === 'direct') ? document.getElementById('bizEmailDomainDirect').value.trim() : sel;
  return id + '@' + domain;
}

function selectPay(type) {
  selectedPay = type;
  document.querySelectorAll('.pay-option').forEach(function(el){ el.classList.remove('selected'); });
  document.getElementById('pay_' + type).classList.add('selected');
  if (type === 'card') {
    document.getElementById('receiptCard').style.display = 'none';
    document.getElementById('bankInfo').style.display = 'none';
    document.getElementById('cardInfo').style.display = 'block';
    selectReceipt('none');
    document.getElementById('nameLabel').innerHTML = 'ì£¼ë¬¸ìëª… <span class="required">*</span>';
    document.getElementById('nameHint').innerHTML = 'ì£¼ë¬¸ì ì„±í•¨ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.'; document.getElementById('nameHint').style.cssText = 'color:inherit; font-size:inherit; font-weight:inherit; background:none; padding:0; border-radius:0;';
    document.getElementById('amountLabel').innerHTML = 'ì¹´ë“œ ê²°ì œ ê¸ˆì•¡ <span class="required">*</span>'; // ì¹´ë“œëŠ” ìœ ì§€
    document.getElementById('amountDisplayLabel').textContent = 'ì¹´ë“œ ê²°ì œ ê¸ˆì•¡';
    document.getElementById('amount').placeholder = 'ê²°ì œí•˜ì‹¤ ê¸ˆì•¡ ì…ë ¥';
    document.getElementById('amountHint').textContent = 'íƒë°°ë¹„ë¥¼ í¬í•¨í•œ ì´ ê²°ì œê¸ˆì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.';
    document.getElementById('submitBtn').textContent = 'ì¹´ë“œ ê²°ì œ ì§„í–‰';
  } else {
    document.getElementById('receiptCard').style.display = 'block';
    document.getElementById('bankInfo').style.display = 'block';
    document.getElementById('cardInfo').style.display = 'none';
    document.getElementById('nameLabel').innerHTML = 'ì£¼ë¬¸ìëª…(ì…ê¸ˆìëª…) <span class="required">*</span>';
    document.getElementById('nameHint').innerHTML = 'âš ï¸ ì¹´í˜ ì•„ì´ë”” ë§ê³  ê¼­ ì…ê¸ˆì ì‹¤ëª…ì„ ì ì–´ì£¼ì„¸ìš”. ì…ê¸ˆ í™•ì¸ ì‹œ í•„ìš”í•©ë‹ˆë‹¤.'; document.getElementById('nameHint').style.cssText = 'display:inline-flex; align-items:center; gap:6px; background:rgba(255,152,0,0.12); padding:8px 14px; border-radius:8px; font-size:13px; color:#e65100; font-weight:600;';
    document.getElementById('amountLabel').innerHTML = 'ì…ê¸ˆ ê¸ˆì•¡ <span class="required">*</span>';
    document.getElementById('amountDisplayLabel').textContent = 'ê²°ì œ ê¸ˆì•¡';
    document.getElementById('amount').placeholder = 'ì…ê¸ˆí•˜ì‹¤ ê¸ˆì•¡ ì…ë ¥';
    document.getElementById('amountHint').textContent = 'íƒë°°ë¹„ë¥¼ í¬í•¨í•œ ì´ ê¸ˆì•¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.';
    document.getElementById('submitBtn').textContent = 'ì£¼ë¬¸ ì™„ë£Œí•˜ê¸°';
  }
}

function selectReceipt(type) {
  selectedReceipt = type;
  document.querySelectorAll('.receipt-option').forEach(function(el){ el.classList.remove('selected'); });
  document.getElementById('rec_' + type).classList.add('selected');
  var detail = document.getElementById('receiptDetail');
  var expenseDetail = document.getElementById('expenseDetail');
  var taxDetail = document.getElementById('taxDetail');
  detail.style.display = 'none';
  expenseDetail.style.display = 'none';
  taxDetail.style.display = 'none';
  if (type === 'cash') {
    detail.style.display = 'block';
  } else if (type === 'expense') {
    expenseDetail.style.display = 'block';
  } else if (type === 'tax') {
    taxDetail.style.display = 'block';
  }
}

function searchAddress() {
  function openPostcode() {
    new daum.Postcode({
      oncomplete: function(data) {
        document.getElementById('postcode').value = data.zonecode;
        document.getElementById('address1').value = data.roadAddress || data.jibunAddress;
        document.getElementById('address2').value = '';
        document.getElementById('address2').focus();
      }
    }).open();
  }

  if (typeof daum !== 'undefined' && daum.Postcode) {
    openPostcode();
  } else {
    var script = document.createElement('script');
    script.src = 'https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js';
    script.onload = openPostcode;
    document.head.appendChild(script);
  }
}



function updateAmount() {
  var val = document.getElementById('amount').value;
  var disp = document.getElementById('amountDisplay');
  var valEl = document.getElementById('amountValue');
  var shippingInfo = document.getElementById('shippingInfo');
  var select = document.getElementById('product');
  var selectedOpt = select.options[select.selectedIndex];

  if (val && parseInt(val) > 0) {
    disp.style.display = 'block';
    valEl.textContent = parseInt(val).toLocaleString('ko-KR') + 'ì›';

    // ìƒí’ˆì´ ì„ íƒëœ ê²½ìš° íƒë°°ë¹„ ì•ˆë‚´ í‘œì‹œ
    if (select.value && selectedOpt) {
      var qty = parseInt(document.getElementById('quantity').value) || 1;
      var price = parseInt(selectedOpt.dataset.price) || 0;
      var shipping = parseInt(selectedOpt.dataset.shipping) || 0;
      var bundle = selectedOpt.dataset.bundle;
      var actualShipping = calcShipping(shipping, bundle, qty);
      var total = (price * qty) + actualShipping;
      if (shipping === 0) {
        shippingInfo.style.display = 'block';
        shippingInfo.textContent = 'ğŸšš ë¬´ë£Œë°°ì†¡ Â· ì´ ' + total.toLocaleString('ko-KR') + 'ì›';
      } else {
        shippingInfo.style.display = 'block';
        shippingInfo.textContent = 'ğŸšš ìƒí’ˆê¸ˆì•¡ ' + (price * qty).toLocaleString('ko-KR') + 'ì› + íƒë°°ë¹„ ' + actualShipping.toLocaleString('ko-KR') + 'ì› = ì´ ' + total.toLocaleString('ko-KR') + 'ì›';
      }
    } else {
      shippingInfo.style.display = 'none';
    }
  } else {
    disp.style.display = 'none';
    shippingInfo.style.display = 'none';
  }
}

function toggleSamePhone() {
  var check = document.getElementById('samePhoneCheck');
  var input = document.getElementById('receiptNumber');
  var isChecked = check.dataset.checked === 'true';

  if (!isChecked) {
    var phone = document.getElementById('phone').value.trim().replace(/-/g, '');
    check.dataset.checked = 'true';
    check.style.background = '#111';
    check.style.borderColor = '#111';
    check.innerHTML = '<svg width="10" height="8" viewBox="0 0 10 8" fill="none"><path d="M1 4L3.5 6.5L9 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
    input.value = phone;
    input.readOnly = true;
    input.style.background = '#F0F0EE';
    input.style.color = '#7A7A7A';
  } else {
    check.dataset.checked = 'false';
    check.style.background = '#fff';
    check.style.borderColor = '#CCCCCC';
    check.innerHTML = '';
    input.value = '';
    input.readOnly = false;
    input.style.background = '';
    input.style.color = '';
  }
}

function validatePhone() {
  var phone = document.getElementById('phone').value.trim();
  var phoneClean = phone.replace(/-/g, '');
  if (!phone) {
    showError('phoneErr', false);
    showError('phoneFormatErr', false);
  } else if (phoneClean.length === 11 && phoneClean.startsWith('01')) {
    showError('phoneErr', false);
    showError('phoneFormatErr', false);
  } else {
    showError('phoneErr', false);
    showError('phoneFormatErr', true);
  }
}

function showError(id, show) {
  document.getElementById(id).style.display = show ? 'block' : 'none';
}

function startLoadingBar() {
  var fill = document.getElementById('loadingBarFill');
  var text = document.getElementById('loadingStepText');
  var steps = [
    { pct: 20, msg: 'ì£¼ë¬¸ ì •ë³´ í™•ì¸ ì¤‘...' },
    { pct: 45, msg: 'ê²°ì œ ìš”ì²­ ì „ì†¡ ì¤‘...' },
    { pct: 70, msg: 'ê²°ì œ í˜ì´ì§€ ì¤€ë¹„ ì¤‘...' },
    { pct: 90, msg: 'ê±°ì˜ ë‹¤ ëì–´ìš”!' },
  ];
  var i = 0;
  fill.style.width = '5%';
  text.textContent = steps[0].msg;
  var timer = setInterval(function() {
    if (i >= steps.length) { clearInterval(timer); return; }
    fill.style.width = steps[i].pct + '%';
    text.textContent = steps[i].msg;
    i++;
  }, 800);
  // ì „ì—­ìœ¼ë¡œ ì €ì¥í•´ì„œ ì™„ë£Œ ì‹œ 100%ë¡œ
  window._loadingTimer = timer;
  window._loadingFill = fill;
  window._loadingText = text;
}

function completeLoadingBar() {
  if (window._loadingTimer) clearInterval(window._loadingTimer);
  if (window._loadingFill) window._loadingFill.style.width = '100%';
  if (window._loadingText) window._loadingText.textContent = 'ê²°ì œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤!';
}

function showSuccess() {
  document.getElementById('formArea').style.display = 'none';
  document.getElementById('successBox').style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
  if (selectedPay === 'card') {
    document.getElementById('successIcon').textContent = 'â³';
    document.getElementById('successIcon').style.background = 'linear-gradient(135deg, #A78BFA, #7C3AED)';
    document.getElementById('successIcon').style.boxShadow = '0 8px 24px rgba(124,58,237,0.3)';
    document.getElementById('successTitle').textContent = 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì‹­ì‹œì˜¤';
    document.getElementById('successMsg').innerHTML = 'ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì¹´ë“œê²°ì œ í˜ì´ì§€ë¡œ ì´ë™ì¤‘ì…ë‹ˆë‹¤.';
    // ë¡œë”©ë°” ì‹œì‘
    document.getElementById('loadingBarWrap').style.display = 'block';
    startLoadingBar();
  } else {
    document.getElementById('successIcon').textContent = 'âœ“';
    document.getElementById('successIcon').style.background = 'linear-gradient(135deg, #4ADE80, #16A34A)';
    document.getElementById('successIcon').style.boxShadow = '0 8px 24px rgba(22,163,74,0.3)';
    document.getElementById('successTitle').textContent = 'ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!';
    var name = document.getElementById('name').value.trim();
    var amount = document.getElementById('amount').value.trim();
    var amountFormatted = parseInt(amount).toLocaleString('ko-KR');
    document.getElementById('successMsg').innerHTML =
      '<div style="background:#F9F9F8; border-radius:16px; padding:24px; text-align:left; margin-top:16px; border:1px solid #EBEBEB;">' +
        '<div style="font-size:11px; color:#A8A8A8; margin-bottom:4px; font-weight:600; letter-spacing:0.3px; text-transform:uppercase;">ì…ê¸ˆìëª…</div>' +
        '<div style="font-size:18px; font-weight:700; color:#1B1B1B; margin-bottom:18px;">' + name + '</div>' +
        '<div style="font-size:11px; color:#A8A8A8; margin-bottom:4px; font-weight:600; letter-spacing:0.3px; text-transform:uppercase;">ì…ê¸ˆ ê¸ˆì•¡</div>' +
        '<div style="font-family:Plus Jakarta Sans,Noto Sans KR,sans-serif; font-size:28px; font-weight:800; color:#1B1B1B; margin-bottom:18px; letter-spacing:-0.5px;">' + amountFormatted + 'ì›</div>' +
        '<div style="font-size:11px; color:#A8A8A8; margin-bottom:4px; font-weight:600; letter-spacing:0.3px; text-transform:uppercase;">ì…ê¸ˆ ê³„ì¢Œ</div>' +
        '<div style="font-size:16px; font-weight:700; color:#1B1B1B; margin-bottom:2px;">IBK ê¸°ì—…ì€í–‰</div>' +
        '<div style="font-family:Plus Jakarta Sans,sans-serif; font-size:16px; font-weight:700; color:#1B1B1B; margin-bottom:4px; letter-spacing:0.5px;">519-075718-04-018</div>' +
        '<div style="font-size:13px; color:#7A7A7A;">ì˜ˆê¸ˆì£¼: ì£¼ì‹íšŒì‚¬ ë¦¬ìœ ë‹ˆí‹°</div>' +
      '</div>' +
      '<div style="margin-top:16px; display:inline-flex; align-items:center; gap:6px; background:#FEF2F2; padding:8px 14px; border-radius:8px; font-size:13px; color:#EF4444; font-weight:600;">âš ï¸ ì…ê¸ˆìëª…ì„ ê¼­ í™•ì¸í•´ ì£¼ì„¸ìš”!</div>' +
      '<div style="margin-top:10px; font-size:13px; color:#7A7A7A;">ì…ê¸ˆ í™•ì¸ í›„ ë¹ ë¥´ê²Œ ë°œì†¡í•´ ë“œë¦´ê²Œìš” ğŸ˜Š</div>';
  }
}

function submitOrder() {
  var name = document.getElementById('name').value.trim();
  var phone = document.getElementById('phone').value.trim();
  var postcode = document.getElementById('postcode').value.trim();
  var address1 = document.getElementById('address1').value.trim();
  var address2 = document.getElementById('address2').value.trim();
  var product = document.getElementById('product').value.trim();
  var quantity = document.getElementById('quantity').value.trim();
  var amount = document.getElementById('amount').value.trim();

  var valid = true;
  showError('nameErr', !name); if (!name) valid = false;

  // ì—°ë½ì²˜ ìœ íš¨ì„± ê²€ì‚¬
  var phoneClean = phone.replace(/-/g, '');
  var phoneEmpty = !phone;
  var phoneInvalid = !phoneEmpty && (phoneClean.length !== 11 || !phoneClean.startsWith('01'));
  showError('phoneErr', phoneEmpty); if (phoneEmpty) valid = false;
  showError('phoneFormatErr', phoneInvalid); if (phoneInvalid) valid = false;
  showError('addressErr', !postcode); if (!postcode) valid = false;
  showError('productErr', !product); if (!product) valid = false;
  showError('quantityErr', !quantity); if (!quantity) valid = false;

  // ì¬ê³  ì´ˆê³¼ ì²´í¬
  var selOpt = document.getElementById('product').options[document.getElementById('product').selectedIndex];
  if (selOpt && selOpt.dataset.stock !== '' && selOpt.dataset.stock !== undefined && selOpt.dataset.stock !== 'undefined') {
    var stockNum = Number(selOpt.dataset.stock);
    var qtyNum = parseInt(quantity) || 0;
    if (qtyNum > stockNum) {
      alert('ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ ì¬ê³ : ' + stockNum + 'ê°œ');
      valid = false;
    }
  }
  showError('amountErr', !amount); if (!amount) valid = false;
  // ì¹´ë“œê²°ì œ ì‹œ ìµœì†Œ 1000ì› ì²´í¬
  var amountNum = parseInt(amount) || 0;
  var isBelowMin = selectedPay === 'card' && amount && amountNum < 1000;
  showError('amountMinErr', isBelowMin);
  if (isBelowMin) valid = false;
  showError('privacyErr', !privacyAgreed); if (!privacyAgreed) valid = false;
  if (!valid) return;

  // í˜„ê¸ˆê²°ì œ(ê³„ì¢Œì´ì²´) ì‹œ ì…ê¸ˆìëª… í™•ì¸ íŒì—…
  if (selectedPay === 'transfer') {
    var amountFormatted = parseInt(amount).toLocaleString('ko-KR');
    var address1 = document.getElementById('address1').value.trim();
    var address2 = document.getElementById('address2').value.trim();
    var postcode = document.getElementById('postcode').value.trim();
    var fullAddress = address1 + (address2 ? ' ' + address2 : '') + (postcode ? ' (' + postcode + ')' : '');
    var confirmed = confirm('ì…ê¸ˆìëª…ê³¼ ê¸ˆì•¡ì„ í™•ì¸í•´ ì£¼ì„¸ìš”!\n\nì…ê¸ˆìëª…: ' + name + '\nì…ê¸ˆ ê¸ˆì•¡: ' + amountFormatted + 'ì›\nì—°ë½ì²˜: ' + (phone || 'ë¯¸ì…ë ¥') + '\nì£¼ì†Œ: ' + (fullAddress || 'ë¯¸ì…ë ¥') + '\n\në§ìœ¼ë©´ [í™•ì¸], ë‹¤ì‹œ ì…ë ¥í•˜ë ¤ë©´ [ì·¨ì†Œ]ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
    if (!confirmed) return;
  }

  if (selectedReceipt === 'cash') {
    var recNum = document.getElementById('receiptNumber').value.trim();
    if (!recNum || recNum.length < 10) {
      document.getElementById('receiptNumberErr').style.display = 'block';
      return;
    }
    document.getElementById('receiptNumberErr').style.display = 'none';
  }

  if (selectedReceipt === 'expense') {
    var expNum = document.getElementById('expenseNumber').value.trim();
    if (!expNum || expNum.length !== 10) {
      document.getElementById('expenseNumberErr').style.display = 'block';
      return;
    }
    document.getElementById('expenseNumberErr').style.display = 'none';
  }
  if (selectedReceipt === 'tax') {
    var bizNm = document.getElementById('bizName').value.trim();
    var bizNum = document.getElementById('bizNumber').value.trim();
    var valid2 = true;
    if (!bizNm) { document.getElementById('bizNameErr').style.display = 'block'; valid2 = false; } else { document.getElementById('bizNameErr').style.display = 'none'; }
    if (!bizNum || bizNum.length !== 10) { document.getElementById('bizNumberErr').style.display = 'block'; valid2 = false; } else { document.getElementById('bizNumberErr').style.display = 'none'; }
    if (!valid2) return;
  }

  var btn = document.querySelector('.submit-btn');
  btn.disabled = true;
  btn.textContent = 'ì „ì†¡ ì¤‘...';

  var payload = {
    type: "order",
    payMethod: selectedPay === 'transfer' ? 'ê³„ì¢Œì´ì²´' : 'ì¹´ë“œê²°ì œ',
    name: name, phone: phone.replace(/-/g, ''),
    address: address1 + (address2 ? ' ' + address2 : '') + ' (' + postcode + ')',
    product: product, quantity: quantity, amount: amount,
    receiptType: selectedReceipt === 'none' ? 'í•„ìš”ì—†ìŒ' : selectedReceipt === 'cash' ? 'í˜„ê¸ˆì˜ìˆ˜ì¦' : selectedReceipt === 'expense' ? 'ì‚¬ì—…ìì§€ì¶œì¦ë¹™' : 'ê³„ì‚°ì„œë°œí–‰',
    receiptNumber: selectedReceipt === 'cash' ? document.getElementById('receiptNumber').value.trim() : selectedReceipt === 'expense' ? document.getElementById('expenseNumber').value.trim() : '',
    bizName: document.getElementById('bizName').value.trim(),
    bizNumber: document.getElementById('bizNumber').value.trim(),
    bizEmail: getBizEmail(),
    submittedAt: new Date().toLocaleString('ko-KR')
  };

  if (selectedPay === 'card') {
    // ì¹´ë“œê²°ì œ í™•ì¸ íŒì—…
    var amountFormatted = parseInt(amount).toLocaleString('ko-KR');
    var address1 = document.getElementById('address1').value.trim();
    var address2 = document.getElementById('address2').value.trim();
    var postcode = document.getElementById('postcode').value.trim();
    var fullAddress = address1 + (address2 ? ' ' + address2 : '') + (postcode ? ' (' + postcode + ')' : '');
    var confirmed = confirm('ì£¼ë¬¸ìëª…ê³¼ ê²°ì œ ê¸ˆì•¡ì„ í™•ì¸í•´ ì£¼ì„¸ìš”!\n\nì£¼ë¬¸ìëª…: ' + name + '\nê²°ì œ ê¸ˆì•¡: ' + amountFormatted + 'ì›\nì—°ë½ì²˜: ' + (phone || 'ë¯¸ì…ë ¥') + '\nì£¼ì†Œ: ' + (fullAddress || 'ë¯¸ì…ë ¥') + '\n\në§ìœ¼ë©´ [í™•ì¸], ë‹¤ì‹œ ì…ë ¥í•˜ë ¤ë©´ [ì·¨ì†Œ]ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
    if (!confirmed) {
      btn.disabled = false;
      btn.textContent = 'ì¹´ë“œ ê²°ì œ ì§„í–‰';
      return;
    }
    var cardName = name;
    var cardPhone = phone;
    var cardProduct = product;
    var cardAmount = parseInt(amount);
    var payRequestData = {
      type: 'payrequest',
      goodname: cardProduct || 'ì£¼ë¬¸ìƒí’ˆ',
      price: cardAmount,
      recvphone: cardPhone,
      memo: cardName
    };
    // í™”ë©´ ë¨¼ì € ì „í™˜
    showSuccess();
    // ê²°ì œ URL ë¨¼ì € ìš”ì²­ â†’ ì„±ê³µ ì‹œ ì£¼ë¬¸ì €ì¥ í›„ ì´ë™
    fetch(WEBHOOK_URL, { method: 'POST', body: JSON.stringify(payRequestData) })
    .then(function(res){ return res.json(); })
    .then(function(data) {
      if (data.success && data.payUrl) {
        // ì£¼ë¬¸ì €ì¥ì€ ë°±ê·¸ë¼ìš´ë“œë¡œ (ì‹¤íŒ¨í•´ë„ ê²°ì œ ì§„í–‰)
        fetch(WEBHOOK_URL, { method: 'POST', body: JSON.stringify(payload) }).catch(function(){});
        completeLoadingBar();
        setTimeout(function() { window.location.href = data.payUrl; }, 400);
      } else {
        alert('ê²°ì œ ìš”ì²­ ì‹¤íŒ¨: ' + (data.message || 'ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.'));
        btn.disabled = false;
        btn.textContent = 'ì¹´ë“œ ê²°ì œ ì§„í–‰';
      }
    })
    .catch(function(err) {
      alert('ê²°ì œ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
      btn.disabled = false;
      btn.textContent = 'ì¹´ë“œ ê²°ì œ ì§„í–‰';
    });
  } else {
    // ê³„ì¢Œì´ì²´: ê¸°ì¡´ ë°©ì‹
    fetch(WEBHOOK_URL, { method: 'POST', body: JSON.stringify(payload) })
      .then(function() { showSuccess(); })
      .catch(function() { showSuccess(); });
  }
}
</script>

<script>
  document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
  document.addEventListener('keydown', function(e) {
    if (e.key === 'F12') { e.preventDefault(); return false; }
    if (e.ctrlKey && (e.key === 'u' || e.key === 'U')) { e.preventDefault(); return false; }
    if (e.ctrlKey && (e.key === 's' || e.key === 'S')) { e.preventDefault(); return false; }
    if (e.ctrlKey && e.shiftKey && ['I','i','J','j','C','c'].includes(e.key)) { e.preventDefault(); return false; }
  });
</script>

</body></html>